#!/bin/bash
# CSV workflow helper

case "$1" in
    export)
        python3 export_to_csv.py "${2:-conferences.csv}"
        ;;
    import)
        if [ -z "$2" ]; then
            echo "Usage: ./csv import <file.csv>"
            exit 1
        fi
        python3 import_manual_conferences.py "$2"
        ./sync_to_website.sh
        ;;
    template)
        cp manual_conferences_template.csv "${2:-my_conferences.csv}"
        echo "âœ… Template created: ${2:-my_conferences.csv}"
        echo "   Edit it, then run: ./csv import ${2:-my_conferences.csv}"
        ;;
    *)
        cat << 'EOF'
CSV Workflow Helper
===================

COMMANDS:

  ./csv export [file.csv]
      Export current database to CSV for editing
      Default: conferences.csv

  ./csv import <file.csv>
      Import CSV and push to website

  ./csv template [file.csv]
      Create empty CSV template
      Default: my_conferences.csv

WORKFLOW:

  1. Export current conferences:
       ./csv export

  2. Edit conferences.csv in Excel/etc.

  3. Import changes:
       ./csv import conferences.csv

  OR start fresh with template:
       ./csv template
       # Edit my_conferences.csv
       ./csv import my_conferences.csv

CSV FORMAT:
  conference_name,year,paper_deadline,url,submission_type,conference_date,abstract_deadline,location
  ISCA,2026,November 17 2025,https://iscaconf.org/isca2026,Regular Paper,June 27-July 1 2026,November 10 2025,Raleigh NC

EOF
        ;;
esac
